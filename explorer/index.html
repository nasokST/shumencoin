<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ShumenCoin Explorer</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.18/js/dataTables.bootstrap.min.js "></script>
<style type="text/css">
	.bs-example{
		margin: 20px;
	}
</style>

<script type="application/javascript">
$( document ).ready(function() {

  $.ajax({
	  url: 'http://localhost:8080/blocks',
	  type: 'GET',
	  dataType: 'json',
	  success: function(data) { 
		fillInBlocksTable(data);
	  },
	  beforeSend: setHeader
	});
  
	function setHeader(xhr) {
		xhr.setRequestHeader('Origin', 'http://localhost:8080/');
	}
	
	function fillInBlocksTable(data) {
		$.each(data, function(index, element) { 
			console.log(index);
			console.log(element);
			console.log(element.index);
			console.log(element.dificulty);
			console.log(element.minedBy);
			console.log(element.nonce);
			
			var html = "<tr>"
						+ "<td>" + element.index +"</td>"
						+ "<td>" + element.dificulty +"</td>"
						+ "<td>" + element.minedBy +"</td>"
						+ "<td>" + element.nonce +"</td>"
						+ "<td>" + element.creationDate +"</td>"
						+ "<td>" + element.blockDataHash +"</td>"
						+ "<td>" + element.blockHash +"</td>"
						+ "<td>" + element.prevBlockHash +"</td>"
						+ "<td>" + JSON.stringify(element.transactions) +"</td>"
					+ "</tr>";
			$( "#block-table-body" ).append(html);
		});
		$('#block-table').DataTable({
                "fixedHeader": true,
                "responsive": true,
				"lengthChange": false,               
				"searching": false,
				"paginate": false,
				"info": false,});
		
		$('block-table').attr('width', 500);
	}
});

</script>
</head>
<body>
<div class="bs-example">
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#sectionA">Blocks</a></li>
        <li><a data-toggle="tab" href="#sectionB">Confirmed Transactions</a></li>
        <li><a data-toggle="tab" href="#sectionC">Pending Transactions</a></li>
        <li class='pull-right'><h4>ShumenCoin</h4></li>
    </ul>
    <div class="tab-content">
        <div id="sectionA" class="tab-pane fade in active">
            <h3>Blocks</h3>
			<div class="container-fluid">
				<table id="block-table" class="table table-striped table-bordered">
					<thead>
						<tr>
							<th>Index</th>
							<th>Dificulty</th>
							<th>MinedBy</th>
							<th>Nonce</th>
							<th>CreationDate</th>
							<th>BlockDataHash</th>
							<th>BlockHash</th>
							<th>PrevBlockHash</th>
							<th>Transactions</th>
						</tr>
					</thead>
					<tbody id="block-table-body">
					</tbody>
				</table>
			</div>
        </div>
        <div id="sectionB" class="tab-pane fade">
            <h3>Confirmed Transactions</h3>
            <p>TODO This will be filled with all confirmed transactions</p>
        </div>
        <div id="sectionC" class="tab-pane fade">
            <h3>Pending Transactions</h3>
            <p>TODO This will be filled with all pending transactions</p>
        </div>
    </div>
</div>
</body>
</html>                            